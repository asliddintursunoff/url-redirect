<!-- <script>
const params = new URLSearchParams(window.location.search);
const data = params.get("data");
if (data) {
  // Test alternative format: rawbt://<encoded_data>
  window.location.href = "rawbt://" + encodeURIComponent(data);
} else {
  document.body.innerText = "No data provided!";
}
</script> -->

<script>
const params = new URLSearchParams(window.location.search);
let data = params.get("data");
if (data) {
  let decoded = decodeURIComponent(data);

  const now = new Date();
  const formatted =
    now.getDate().toString().padStart(2, "0") + "-" +
    (now.getMonth() + 1).toString().padStart(2, "0") + "-" +
    now.getFullYear() + " " +
    now.getHours().toString().padStart(2, "0") + ":" +
    now.getMinutes().toString().padStart(2, "0");

  // Insert after "Olingan Vaqt" line
  decoded = decoded.replace(
    /(Olingan Vaqt.*\n)/,
    `$1Topshirilgan    : ${formatted}\n`
  );

  // Redirect with updated text
  window.location.href = "rawbt://" + encodeURIComponent(decoded);
} else {
  document.body.innerText = "No data provided!";
}
</script>
