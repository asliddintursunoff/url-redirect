<!-- <script>
const params = new URLSearchParams(window.location.search);
const data = params.get("data");
if (data) {
  // Test alternative format: rawbt://<encoded_data>
  window.location.href = "rawbt://" + encodeURIComponent(data);
} else {
  document.body.innerText = "No data provided!";
}
</script> -->

<script>
const params = new URLSearchParams(window.location.search);
let data = params.get("data");
if (data) {
  // Add current time to receipt before redirect
  const now = new Date();
  const formatted =
    now.getDate().toString().padStart(2, "0") + "-" +
    (now.getMonth() + 1).toString().padStart(2, "0") + "-" +
    now.getFullYear() + " " +
    now.getHours().toString().padStart(2, "0") + ":" +
    now.getMinutes().toString().padStart(2, "0");

  // Append to receipt text
  data = decodeURIComponent(data) + "\nTopshirilgan: " + formatted;

  // Redirect with updated data
  window.location.href = "rawbt://" + encodeURIComponent(data);
} else {
  document.body.innerText = "No data provided!";
}
</script>
